1:"$Sreact.fragment"
2:I[52057,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3:I[19646,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
4:I[5500,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"Image"]
5:I[26863,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
6:I[614,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
7:I[36773,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
37:I[92522,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
38:I[18594,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
39:I[23120,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3a:I[83388,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3b:I[4685,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3c:I[60597,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3d:I[52087,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3e:I[85301,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
3f:I[51678,["/_next/static/chunks/f9fb6c03ee20c9cf.js","/_next/static/chunks/55fdeabc380c794a.js","/_next/static/chunks/fb65dc2edde1250e.js","/_next/static/chunks/acbad84493a0396b.js","/_next/static/chunks/8c93724b435ab242.js","/_next/static/chunks/dab6b902f1f46a02.js"],"default"]
40:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/d2be314c3ece3fbe.js"],"OutletBoundary"]
41:"$Sreact.suspense"
0:{"buildId":"YSYJJyAFFhJV4-z7mWwHv","rsc":["$","$1","c",{"children":[["$","$L2",null,{"children":[["$","$L3",null,{"position":"relative","width":{"xs":"100vw","sm":"100%"},"marginBottom":2,"marginX":{"xs":-2,"sm":0},"height":{"xs":300,"sm":600},"children":[["$","$L4",null,{"src":"/articles/crypto-llm/cover.png","alt":"An image showing encrypted & decrypted text","fill":true,"style":{"objectFit":"cover"},"sizes":"(max-width: 600px) 384px, 1080px","quality":90}],null]}],["$","$L3",null,{"children":[["$","$L5",null,{"variant":"h2","sx":{"fontWeight":"bold","fontSize":{"xs":"250%","sm":"400%"}},"children":"A method for text to text encryption using LLMs"}],["$","$L6",null,{"direction":"row","spacing":4,"children":[["$","$L5",null,{"id":"publication-date","variant":"overline","children":"1 February 2026"}],["$","$L5",null,{"id":"tags","variant":"overline","children":"deep learning | math | llm | crypto"}]]}],["$","$L7",null,{}]]}],["$","$L3",null,{"children":["$","article",null,{"className":"prose dark:prose-invert","children":[[["$","p",null,{"children":["In this article, I present a novel (and probably useless but fun) use of language models: ",["$","strong",null,{"children":"encrypting text as text"}],"."]}],"\n",["$","h1",null,{"children":"Language models can be used to compress text"}],"\n",["$","p",null,{"children":["Given a sequence of tokens, language models predict the probability distribution of the next token (if you’re unfamiliar with tokens, you can roughly think of them as words or word fragments). Because they define a conditional probability model over text, they can be used as the probabilistic component of an arithmetic coder to compress text (see, for example, ",["$","a",null,{"href":"https://github.com/AlexBuz/llama-zip","children":"llama-zip"}],"). An arithmetic coder is a compression algorithm that leverages a statistical model to make probable data take up less space than rare data."]}],"\n",["$","p",null,{"children":"When compression is effective, text is transformed into a seemingly unpredictable sequence of bits. Unpredictability is a hallmark of near-optimal compression. The arithmetic decoder then reconstructs the original text exactly. In practice, however, this application is mostly useless: the size of the model parameters typically dwarfs the size of any text worth compressing."}],"\n",["$","h1",null,{"children":"Language models can be used to encode data as text"}],"\n",["$","p",null,{"children":"This raises a more interesting question: can we do the opposite? That is, can we turn an arbitrary sequence of bits into text and later recover the original bits? If so, we could transmit any message that can be expressed as bits in the form of a plausible-looking text. Naturally, this is even less useful as it is simply a prohibitively expensive way to store binary data."}],"\n",["$","p",null,{"children":"The main difficulty is that while arithmetic coding guarantees that:"}],"\n",["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"text"}],["$","mo",null,{"children":"→"}],["$","mtext",null,{"children":"bits"}],["$","mo",null,{"children":"→"}],["$","mtext",null,{"children":"text"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{text} \\rightarrow \\text{bits} \\rightarrow \\text{text}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6151em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"text"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":"$L8"}],"$L9","$La","$Lb"]}],"$Lc"]}]]}]}],"\n","$Ld","\n","$Le","\n","$Lf","\n","$L10","\n","$L11","\n","$L12","\n","$L13","\n","$L14","\n","$L15","\n","$L16","\n","$L17","\n","$L18","\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21","\n","$L22","\n","$L23","\n","$L24","\n","$L25","\n","$L26","\n","$L27","\n","$L28","\n","$L29","\n","$L2a","\n","$L2b","\n","$L2c","\n","$L2d","\n","$L2e","\n","$L2f","\n","$L30"],"$L31",null]}]}]]}],["$L32","$L33","$L34","$L35"],"$L36"]}],"loading":null,"isPartial":false}
8:["$","span",null,{"className":"mord","children":"bits"}]
9:["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]
a:["$","span",null,{"className":"mrel","children":"→"}]
b:["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]
c:["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6151em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"text"}]}]]}]
d:["$","p",null,{"children":["recovers the original text, it does ",["$","em",null,{"children":"not"}]," guarantee that"]}]
e:["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"bits"}],["$","mo",null,{"children":"→"}],["$","mtext",null,{"children":"text"}],["$","mo",null,{"children":"→"}],["$","mtext",null,{"children":"bits"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{bits} \\rightarrow \\text{text} \\rightarrow \\text{bits}"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"bits"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6151em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"text"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"→"}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"bits"}]}]]}]]}]]}]}]
f:["$","p",null,{"children":"recovers the original bit sequence."}]
10:["$","p",null,{"children":["That said, we can design a variant of arithmetic coding that effectively reverses the roles of tokens and bits. At each step, the language model predicts a probability distribution over the next token. These probabilities define a partition of the interval ",["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mo",null,{"stretchy":"false","children":"["}],["$","mn",null,{"children":"0"}],["$","mo",null,{"separator":"true","children":","}],["$","mn",null,{"children":"1"}],["$","mo",null,{"stretchy":"false","children":"]"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"[0,1]"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mopen","children":"["}],["$","span",null,{"className":"mord","children":"0"}],["$","span",null,{"className":"mpunct","children":","}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.1667em"}}],["$","span",null,{"className":"mord","children":"1"}],["$","span",null,{"className":"mclose","children":"]"}]]}]}]]}],", where each token corresponds to a sub-interval whose length is proportional to its predicted probability. In standard arithmetic coding, bits are interpreted as choosing between sub-intervals; here, we instead interpret bits as selecting ",["$","em",null,{"children":"tokens"}]," via this probabilistic partition."]}]
11:["$","p",null,{"children":["While the theory is straightforward, the implementation is not. The token vocabulary is large, and pathological behaviors start to appear when sampling low-probability tokens. In particular, the encoder sometimes produced a sequence of tokens that, once decoded into text and tokenized again, resulted in a ",["$","em",null,{"children":"different"}]," token sequence."]}]
12:["$","p",null,{"children":"This is not a bug in the tokenizer, but a fundamental property: tokenization is not a bijection. It only guarantees"}]
13:["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"text"}],["$","mo",null,{"children":"="}],["$","mtext",null,{"children":"decode"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mtext",null,{"children":"encode"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mtext",null,{"children":"text"}],["$","mo",null,{"stretchy":"false","children":")"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{text} = \\text{decode}(\\text{encode}(\\text{text}))"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6151em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"text"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"="}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"decode"}]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"encode"}]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"text"}]}],["$","span",null,{"className":"mclose","children":"))"}]]}]]}]]}]}]
14:["$","p",null,{"children":"but not"}]
15:["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"tokens"}],["$","mo",null,{"children":"="}],["$","mtext",null,{"children":"encode"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mtext",null,{"children":"decode"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mtext",null,{"children":"tokens"}],["$","mo",null,{"stretchy":"false","children":")"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{tokens} = \\text{encode}(\\text{decode}(\\text{tokens}))"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"tokens"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"="}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"encode"}]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"decode"}]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"tokens"}]}],["$","span",null,{"className":"mclose","children":"))"}]]}]]}]]}]}]
16:["$","p",null,{"children":"When I first realized this, I nearly gave up. However, there is a crucial observation: the language model is trained to produce token sequences that originate from the tokenizer. As a result, most high-probability tokens satisfy:"}]
17:["$","span",null,{"className":"katex-display","children":["$","span",null,{"className":"katex","children":[["$","span",null,{"className":"katex-mathml","children":["$","math",null,{"xmlns":"http://www.w3.org/1998/Math/MathML","display":"block","children":["$","semantics",null,{"children":[["$","mrow",null,{"children":[["$","mtext",null,{"children":"tokens"}],["$","mo",null,{"children":"="}],["$","mtext",null,{"children":"encode"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mtext",null,{"children":"decode"}],["$","mo",null,{"stretchy":"false","children":"("}],["$","mtext",null,{"children":"tokens"}],["$","mo",null,{"stretchy":"false","children":")"}],["$","mo",null,{"stretchy":"false","children":")"}]]}],["$","annotation",null,{"encoding":"application/x-tex","children":"\\text{tokens} = \\text{encode}(\\text{decode}(\\text{tokens}))"}]]}]}]}],["$","span",null,{"className":"katex-html","aria-hidden":"true","children":[["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"0.6944em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"tokens"}]}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}],["$","span",null,{"className":"mrel","children":"="}],["$","span",null,{"className":"mspace","style":{"marginRight":"0.2778em"}}]]}],["$","span",null,{"className":"base","children":[["$","span",null,{"className":"strut","style":{"height":"1em","verticalAlign":"-0.25em"}}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"encode"}]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"decode"}]}],["$","span",null,{"className":"mopen","children":"("}],["$","span",null,{"className":"mord text","children":["$","span",null,{"className":"mord","children":"tokens"}]}],["$","span",null,{"className":"mclose","children":"))"}]]}]]}]]}]}]
18:["$","p",null,{"children":["To take advantage of this, I restricted sampling to a relatively conservative regime: ",["$","code",null,{"children":"top_k = 200"}],", ",["$","code",null,{"children":"top_p = 0.9"}],", and ",["$","code",null,{"children":"temperature=0.9"}],". This eliminates most problematic tokens and yields well-behaved sequences that survive a decode–re-encode round trip."]}]
19:["$","h1",null,{"children":"Using language models to encrypt text as text"}]
1a:["$","p",null,{"children":["With these two codecs in hand (text → bits → text and bits → text → bits) it was finally time to make my dream come true: ",["$","strong",null,{"children":"encrypting text as text"}],"."]}]
1b:["$","p",null,{"children":"At a high level, the pipeline is simply this:"}]
1c:["$","pre",null,{"children":["$","code",null,{"children":"encryption: text → bits → encrypted bits → encrypted text\ndecryption: encrypted text → encrypted bits → bits → text\n"}]}]
1d:["$","p",null,{"children":"And each arrow is perfectly computable and reversible."}]
1e:["$","h1",null,{"children":"Creating an encrypted chat protocol using the method"}]
1f:["$","p",null,{"children":"To demonstrate the idea in a more playful setting, I simulated an encrypted chat application in which encrypted messages resemble ordinary messages. Making this work requires solving a few practical problems."}]
20:["$","h2",null,{"children":"Choosing a chat format"}]
21:["$","p",null,{"children":"First, we need a message format. I use the following:"}]
22:["$","pre",null,{"children":["$","code",null,{"children":"- A: message1\n- B: message2\n- A: message3\n...\n"}]}]
23:["$","p",null,{"children":["Each message is terminated by a ",["$","code",null,{"children":"\\n"}]," token, which is explicitly forbidden inside messages. This provides a clear stopping condition for the decoder. Without an end-of-message token, decoding would have no natural termination point and would continue indefinitely."]}]
24:["$","h2",null,{"children":"Making encrypted text finish gracefully"}]
25:["$","p",null,{"children":["It would be unfortunate if encrypted messages ended abruptly as soon as all bits were consumed. To avoid this, we treat ",["$","code",null,{"children":"\\n"}]," as an end-of-sequence token. While there are still bits left to encode, ",["$","code",null,{"children":"\\n"}]," is excluded from the token set. Once encoding is complete, ",["$","code",null,{"children":"\\n"}]," is reintroduced, and generation continues until it is sampled, producing a clean and natural-looking ending."]}]
26:["$","h2",null,{"children":"Choosing an encryption algorithm"}]
27:["$","p",null,{"children":"We also need an encryption algorithm that does not significantly inflate the message size. Ideally, the number of encrypted bits should be close to the number of original bits, since bit length is tied to entropy, and more bits often lead to longer sequences. A conversation with unusually high entropy might attract unwanted attention."}]
28:["$","p",null,{"children":"I decided to use AES in counter mode (AES-CTR). CTR mode behaves like a stream cipher: it XORs the plaintext with a pseudorandom keystream derived from AES, producing ciphertext that is indistinguishable from random under standard assumptions. Unlike authenticated modes, it introduces no padding or expansion beyond a fixed-size nonce. However, this nonce does not need to be secret; it only needs to be unique. I decided to use the number of previous messages as the nonce, avoiding the need to send it alongside the message. This ultimately reduces the number of bits that need to be encoded as text."}]
29:["$","h2",null,{"children":"Detecting whether a message is encrypted"}]
2a:["$","p",null,{"children":["Finally, I needed a way to distinguish encrypted from plain messages. In my experimentation, decrypting a non-encrypted message has a high chance of failing the bits-to-text conversion because it often proposes tokens that would have been excluded from the ",["$","code",null,{"children":"top_k"}]," or ",["$","code",null,{"children":"top_p"}]," first tokens. I thus rely on this right now to determine if a message was encrypted or not. An alternative would be to prefix the encrypted message with a special token. During decoding, if the first token is this special token, the message is treated as unencrypted and displayed as-is."]}]
2b:["$","h1",null,{"children":"Demo time!"}]
2c:["$","p",null,{"children":"Actions:"}]
2d:["$","ul",null,{"children":["\n",["$","li",null,{"children":["You can switch between normal and encrypted mode with the ",["$","$L37",null,{}]," / ",["$","$L38",null,{"className":"material-symbols-outlined","component":"span","sx":{"transform":"translateY(6px)"},"children":"domino_mask"}]]}],"\n",["$","li",null,{"children":["Switch user with ",["$","$L39",null,{}]," buton. - Delete all messages with\n",["$","$L3a",null,{}]," button."]}],"\n",["$","li",null,{"children":["Reset default conversation with ",["$","$L3b",null,{}]," button"]}],"\n",["$","li",null,{"children":["Change the decrypt conversation with the ",["$","$L3c",null,{}]," button - Send message by\npressing \"Enter\" or clicking on the ",["$","$L3d",null,{}]]}],"\n"]}]
2e:["$","p",null,{"children":"The colored dot on each message indicates knowledge about encryption:"}]
2f:["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","$L3e",null,{"color":"success","sx":{"fontSize":13}}],": Message is\nnot encrypted"]}],"\n",["$","li",null,{"children":[["$","$L3e",null,{"color":"warning","sx":{"fontSize":13}}],": We don't know\nif the message is encrypted or not"]}],"\n",["$","li",null,{"children":[["$","$L3e",null,{"color":"error","sx":{"fontSize":13}}],": Message is\nencrypted"]}],"\n"]}]
30:["$","$L3f",null,{}]
31:["$","$L7",null,{}]
32:["$","script","script-0",{"src":"/_next/static/chunks/fb65dc2edde1250e.js","async":true}]
33:["$","script","script-1",{"src":"/_next/static/chunks/acbad84493a0396b.js","async":true}]
34:["$","script","script-2",{"src":"/_next/static/chunks/8c93724b435ab242.js","async":true}]
35:["$","script","script-3",{"src":"/_next/static/chunks/dab6b902f1f46a02.js","async":true}]
36:["$","$L40",null,{"children":["$","$41",null,{"name":"Next.MetadataOutlet","children":"$@42"}]}]
42:null
